# 版本更新日志

## v1.0.0 - 2025-10-14

### 🎉 首次发布

完整的 Box2D 地图设计器，支持创建、编辑和导出 Box2D 物理场景。

### ✨ 核心功能

#### 形状工具
- ✅ **矩形工具**: 拖动创建矩形，支持任意方向绘制
- ✅ **圆形工具**: 拖动创建圆形，默认半径 0.5m
- ✅ **多边形工具**: 点击添加顶点，双击或回车完成
- ✅ **选择工具**: 点击选中物体，拖动移动物体

#### 关节系统
- ✅ **旋转关节**: 连接两个刚体，支持角度限制
- ✅ **局部坐标**: 关节锚点使用局部坐标，随物体移动
- ✅ **锚点拖动**: 可视化拖动调整锚点位置
- ✅ **实时反馈**: 拖动时高亮显示，放大锚点

#### 撤销/重做系统
- ✅ **命令模式**: 完整的命令历史管理
- ✅ **快捷键**: Ctrl+Z 撤销，Ctrl+Y 重做
- ✅ **50步历史**: 支持最多 50 步撤销
- ✅ **所有操作**: 创建、删除、移动、属性修改全部支持

#### Box2D 坐标系统
- ✅ **完整转换**: 内部使用 Box2D 坐标（Y 轴向上，单位：米）
- ✅ **坐标显示**: 状态栏和属性面板显示米单位
- ✅ **网格系统**: 每格 1 米，带坐标标签
- ✅ **原点标记**: 红色十字标记 (0, 0) 点

#### 视图控制
- ✅ **PPM 缩放**: 5-50 可调，实时生效
- ✅ **原点偏移**: X/Y 轴各 ±20m 范围
- ✅ **滚轮缩放**: 以鼠标为中心智能缩放
- ✅ **中键拖动**: 自由平移画布
- ✅ **重置按钮**: 一键恢复默认视图

#### 属性编辑
- ✅ **刚体类型**: Static/Dynamic/Kinematic
- ✅ **物理属性**: 密度、摩擦力、弹性
- ✅ **阻尼控制**: 线性阻尼、角阻尼
- ✅ **重力缩放**: 可调整重力影响
- ✅ **固定旋转**: 锁定物体旋转
- ✅ **关节参数**: 角度限制、锚点位置

#### 文件操作
- ✅ **保存设计**: 保存为 JSON 格式
- ✅ **加载设计**: 加载已保存的设计文件
- ✅ **导出 Box2D**: 导出标准 Box2D JSON 格式
- ✅ **格式验证**: 自动验证文件格式

### 🎨 用户界面

- ✅ **工具栏**: 直观的工具按钮，支持快捷键
- ✅ **属性面板**: 右侧可滚动面板，实时编辑
- ✅ **状态栏**: 显示工具、对象数、鼠标坐标、消息
- ✅ **视图设置**: 独立的视图控制区域
- ✅ **响应式设计**: 适配不同屏幕尺寸

### 🖱️ 交互体验

- ✅ **实时渲染**: 所有操作立即显示
- ✅ **视觉反馈**: 选中高亮、拖动提示
- ✅ **智能捕捉**: 精确的点击检测
- ✅ **流畅动画**: 无卡顿的交互体验
- ✅ **鼠标光标**: 根据操作改变光标样式

### 📊 技术栈

- **前端框架**: Vite 5.0 + TypeScript 5.3
- **渲染**: HTML5 Canvas 2D API
- **构建工具**: Vite (快速 HMR)
- **类型检查**: TypeScript 严格模式
- **代码规范**: ESLint + Prettier

### 📐 坐标系统

- **Box2D 坐标系**: Y 轴向上，单位米，原点可配置
- **Canvas 坐标系**: Y 轴向下，单位像素，仅用于渲染
- **坐标转换**: 自动在两个坐标系间转换
- **PPM 默认值**: 20 (1米 = 20像素)

### 🎯 默认设置

- **画布尺寸**: 1000×700 像素
- **网格大小**: 1 米
- **PPM**: 20
- **原点位置**: Canvas 中心底部 (0, 0)
- **撤销历史**: 50 步

### 📦 项目结构

```
moonbit_stickman_map_designer/
├── src/
│   └── main.ts              # 主应用代码 (1754 行)
├── index.html               # HTML 入口
├── styles.css               # 样式文件 (488 行)
├── package.json             # 项目配置
├── tsconfig.json            # TypeScript 配置
├── vite.config.ts           # Vite 配置
└── *.md                     # 文档 (25+ 个)
```

### 📚 文档

#### 用户文档
- ✅ `Readme.md` - 项目介绍
- ✅ `QUICK_START.md` - 快速入门
- ✅ `USER_GUIDE.md` - 完整用户手册
- ✅ `QUICK_REFERENCE.md` - 快速参考卡片
- ✅ `TESTING_GUIDE.md` - 测试指南

#### 功能说明
- ✅ `UNDO_REDO_GUIDE.md` - 撤销/重做说明
- ✅ `ANCHOR_DRAG_FEATURE.md` - 锚点拖动功能
- ✅ `VIEW_CONTROLS_GUIDE.md` - 视图控制详解
- ✅ `MOUSE_INTERACTION_GUIDE.md` - 鼠标交互指南

#### 技术文档
- ✅ `ARCHITECTURE.md` - 系统架构
- ✅ `API.md` - API 文档
- ✅ `COORDINATE_CONVERSION.md` - 坐标转换说明
- ✅ `FILE_FORMATS.md` - 文件格式规范

#### 开发文档
- ✅ `CONTRIBUTING.md` - 贡献指南
- ✅ `BOX2D_REFACTORING_COMPLETE.md` - 重构报告
- ✅ `VIEW_CONTROLS_IMPLEMENTATION.md` - 实现细节

### 🐛 已知问题

- 无已知重大问题

### 📝 代码统计

- **总行数**: ~3000 行
- **TypeScript**: ~1750 行
- **HTML**: ~150 行
- **CSS**: ~488 行
- **文档**: 25+ 个 Markdown 文件

### 🎓 学习资源

项目包含完整的文档和示例，适合：
- Box2D 物理引擎学习
- Canvas 2D 图形编程
- TypeScript 项目开发
- 命令模式实现
- 坐标系统转换

### 🚀 快速开始

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 预览构建结果
npm run preview
```

访问 http://localhost:3000 开始使用！

### 👥 作者

GitHub Copilot AI Assistant

### 📄 许可证

MIT License

---

**完整功能，生产就绪！** 🎉
