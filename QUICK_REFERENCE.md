# 🎮 快速参考 - Box2D 地图设计器

## 🖱️ 鼠标操作（新增！）

### 快速视图控制
| 操作 | 快捷方式 | 说明 |
|-----|---------|------|
| 放大 | 滚轮向上 ⬆️ | 以鼠标为中心放大 |
| 缩小 | 滚轮向下 ⬇️ | 以鼠标为中心缩小 |
| 平移 | 中键拖动 🖱️ | 自由移动画布 |

**提示**: 滚轮和中键是最快的导航方式！⭐

## 🎛️ 视图控制

### 实时调整视图
位置：右侧属性面板顶部 "🔧 视图设置"

| 控制 | 范围 | 默认 | 说明 |
|-----|------|------|------|
| PPM 缩放 | 5-50 | 20 | 调整视图大小 |
| 原点 X | -20 ~ +20m | 0m | 左右平移视图 |
| 原点 Y | -20 ~ +20m | 0m | 上下平移视图 |

**快速缩放示例**:
- `PPM = 10` → 缩小，看50m范围
- `PPM = 20` → 默认，看25m范围 ⭐
- `PPM = 40` → 放大，看12m范围

**重置视图**: 点击"重置视图"按钮恢复默认

## 坐标系统

```
Box2D 坐标系 (内部数据)
├─ 原点: Canvas 中心底部
├─ Y轴: 向上 ↑
├─ 单位: 米 (m)
└─ PPM: 20 (1米 = 20像素)

Canvas 坐标系 (仅渲染)
├─ 原点: 左上角
├─ Y轴: 向下 ↓
└─ 单位: 像素 (px)
```

## 工具快捷键

| 工具 | 快捷键 | 说明 |
|-----|--------|------|
| 选择 | `S` | 选择和移动对象 |
| 矩形 | `R` | 创建矩形 (默认 1m×1m) |
| 圆形 | `C` | 创建圆形 (默认半径 0.5m) |
| 多边形 | `P` | 创建多边形 (点击顶点) |
| 关节 | `J` | 创建旋转关节 |
| 撤销 | `Ctrl+Z` | 撤销上一步操作 |
| 重做 | `Ctrl+Y` | 重做操作 |
| 删除 | `Delete` | 删除选中对象 |

## 默认尺寸

```
矩形: 1m × 1m
圆形: 半径 0.5m
最小尺寸: 0.5m × 0.5m (矩形), 0.25m (圆形)
点击范围: 0.5m (10像素)
```

## 操作流程

### 创建关节
1. 选择 "关节" 工具
2. 点击第一个物体（锚点 A - 红色）
3. 点击第二个物体（锚点 B - 紫色）
4. 完成！

### 拖动锚点
1. 选择 "选择" 工具
2. 点击关节的锚点
3. 拖动到新位置
4. 释放鼠标

### 编辑属性
1. 选中对象
2. 在右侧属性面板修改
3. 自动保存并更新

## 文件格式

```json
{
  "objects": [
    {
      "type": "body",
      "position": { "x": 5.0, "y": 3.5 },  // 米
      "width": 2.0,                          // 米
      "height": 1.5,                         // 米
      "angle": 0.785                         // 弧度
    }
  ]
}
```

## 坐标转换

```typescript
// 修改 PPM 以调整缩放
const PPM = 20;  // 默认: 1m = 20px

// 示例
PPM = 10;  // 缩小视图 (1m = 10px)
PPM = 40;  // 放大视图 (1m = 40px)
```

## 常见问题

**Q: 看不到创建的形状？**
A: 在画布中心底部创建，Y 轴向上

**Q: 点击不准确？**
A: 检查是否在 "选择" 模式

**Q: 坐标显示奇怪？**
A: 刷新页面，检查控制台错误

**Q: 关节不跟随物体？**
A: 这是 bug，请报告

## 颜色说明

| 颜色 | 含义 |
|-----|------|
| 🔴 红色 | 锚点 A |
| 🟣 紫色 | 锚点 B |
| 🔵 蓝色 | 选中状态 |
| 🟢 绿色 | 拖动状态 |
| ⚪ 白色 | 普通对象 |

## 物理参数

| 参数 | 范围 | 说明 |
|-----|------|------|
| 密度 | 0+ | kg/m² |
| 摩擦力 | 0-1 | 0=无摩擦 |
| 弹性 | 0-1 | 0=不弹 |
| 线性阻尼 | 0+ | 速度衰减 |
| 角阻尼 | 0+ | 旋转衰减 |
| 重力缩放 | any | 1=正常重力 |

## 快速测试

```bash
# 1. 创建矩形
点击 "矩形" → 拖动 → 检查大小约 1m×1m

# 2. 创建关节
点击 "关节" → 点击物体A → 点击物体B → 完成

# 3. 保存测试
创建几个形状 → "保存设计" → 检查 JSON 文件

# 4. 导出测试
"导出 Box2D JSON" → 检查格式正确
```

## 推荐尺寸

```
小道具:   0.5m - 1m
角色:     1m - 2m
车辆:     3m - 5m
建筑:     5m - 20m
地面/墙:  10m+
```

---

💡 **提示**: 所有坐标和尺寸都是米单位！
📖 **文档**: 查看 TESTING_GUIDE.md 了解详细测试步骤
🐛 **问题**: 检查浏览器控制台获取错误信息
