# 🧪 快速测试指南

## 启动应用

```bash
npm run dev
```

然后在浏览器打开 http://localhost:3000/

## 快速测试流程

### 1️⃣ 基础形状测试（2分钟）

1. **创建矩形**
   - 点击 "矩形" 工具
   - 在画布上拖动创建矩形
   - ✅ 检查: 默认大小约 1m×1m
   - ✅ 检查: 可以向任意方向拖动

2. **创建圆形**
   - 点击 "圆形" 工具
   - 在画布上拖动创建圆形
   - ✅ 检查: 默认半径约 0.5m
   - ✅ 检查: 圆形正常显示

3. **创建多边形**
   - 点击 "多边形" 工具
   - 点击多个点（至少3个）
   - 双击或按 Enter 完成
   - ✅ 检查: 多边形正确闭合

### 2️⃣ 选择和移动测试（1分钟）

1. **选择物体**
   - 点击 "选择" 工具
   - 点击刚才创建的形状
   - ✅ 检查: 形状被高亮（蓝色边框）
   - ✅ 检查: 右侧属性面板显示信息

2. **移动物体**
   - 拖动选中的形状
   - ✅ 检查: 形状跟随鼠标移动
   - ✅ 检查: 状态栏显示坐标（米）

3. **坐标显示**
   - 移动鼠标到画布上
   - ✅ 检查: 状态栏显示 "坐标: (X.XXm, Y.XXm)"
   - ✅ 检查: 网格线标注显示 "5m", "10m" 等

### 3️⃣ 关节测试（2分钟）

1. **创建两个物体**
   - 创建两个矩形，相距一定距离

2. **创建关节**
   - 点击 "关节" 工具
   - 点击第一个矩形（锚点出现）
   - 点击第二个矩形（关节创建）
   - ✅ 检查: 红色连线连接两个物体
   - ✅ 检查: 锚点 A 为红色，锚点 B 为紫色

3. **选择关节**
   - 点击 "选择" 工具
   - 点击关节的锚点
   - ✅ 检查: 关节被选中
   - ✅ 检查: 属性面板显示锚点坐标（米）

4. **拖动锚点**
   - 拖动锚点 A 或 B
   - ✅ 检查: 锚点跟随鼠标移动
   - ✅ 检查: 拖动时锚点变大（10px）
   - ✅ 检查: 拖动时高亮显示（绿色边框）

5. **物体移动测试**
   - 选择并移动其中一个物体
   - ✅ 检查: 关节的锚点跟随物体移动
   - ✅ 检查: 关节保持连接

### 4️⃣ 属性编辑测试（1分钟）

1. **编辑物体属性**
   - 选中一个物体
   - 在右侧属性面板修改：
     - 刚体类型（Static/Dynamic/Kinematic）
     - 密度、摩擦力、弹性
   - ✅ 检查: 修改后值立即更新

2. **编辑关节属性**
   - 选中一个关节
   - 修改锚点坐标（注意单位是米）
   - ✅ 检查: 输入步长为 0.1m
   - ✅ 检查: 修改后关节位置更新

### 5️⃣ 撤销/重做测试（1分钟）

1. **测试撤销**
   - 创建几个形状
   - 按 Ctrl+Z 或点击撤销按钮
   - ✅ 检查: 最后的操作被撤销
   - ✅ 检查: 可以连续撤销

2. **测试重做**
   - 按 Ctrl+Y 或点击重做按钮
   - ✅ 检查: 撤销的操作被恢复

3. **按钮状态**
   - ✅ 检查: 没有可撤销时，撤销按钮禁用
   - ✅ 检查: 没有可重做时，重做按钮禁用

### 6️⃣ 文件操作测试（2分钟）

1. **保存文件**
   - 创建几个形状和关节
   - 点击 "保存设计" 按钮
   - ✅ 检查: 下载 map_design.json 文件
   - ✅ 检查: 打开文件，坐标都是数字（米）

2. **加载文件**
   - 点击 "加载设计" 按钮
   - 选择刚才保存的文件
   - ✅ 检查: 所有形状和关节正确恢复
   - ✅ 检查: 位置、尺寸都正确

3. **导出 Box2D**
   - 点击 "导出 Box2D JSON" 按钮
   - ✅ 检查: 下载 box2d_data.json 文件
   - ✅ 检查: 文件包含 bodies 和 joints 数组
   - ✅ 检查: 数据格式符合 Box2D 标准

### 7️⃣ 视觉检查（1分钟）

1. **网格显示**
   - ✅ 检查: 网格线清晰可见
   - ✅ 检查: 每条网格线代表 1 米
   - ✅ 检查: 坐标标签显示 "0m", "5m", "10m" 等

2. **原点标记**
   - ✅ 检查: 画布中心底部有红色十字标记
   - ✅ 检查: 红色十字是坐标系原点 (0, 0)

3. **方向指示器**
   - 选中矩形
   - ✅ 检查: 矩形中心有一条白线指向前方（角度指示）
   - 选中圆形
   - ✅ 检查: 圆形中心有一条线指向边缘（半径指示）

### 8️⃣ 视图控制测试（新功能！2分钟）

1. **PPM 缩放**
   - 找到右侧 "🔧 视图设置" 区域
   - 拖动 PPM 滑块到 10
   - ✅ 检查: 视图缩小，可以看到更大范围
   - 拖动 PPM 滑块到 40
   - ✅ 检查: 视图放大，物体变大
   - ✅ 检查: PPM 值实时显示

2. **原点偏移**
   - 拖动 "原点 X" 滑块
   - ✅ 检查: 物体左右移动
   - 拖动 "原点 Y" 滑块
   - ✅ 检查: 物体上下移动
   - ✅ 检查: 红色原点标记跟随移动

3. **重置视图**
   - 点击 "重置视图" 按钮
   - ✅ 检查: PPM 恢复到 20
   - ✅ 检查: 原点恢复到 (0, 0)
   - ✅ 检查: 所有滑块回到默认位置

4. **视图不影响数据**
   - 创建一个物体
   - 调整 PPM 和原点
   - 保存文件
   - 重置视图
   - 加载文件
   - ✅ 检查: 物体在正确位置（视图设置不保存）

### 9️⃣ 删除测试（30秒）

1. **删除物体**
   - 选中一个形状
   - 按 Delete 键或点击 "删除对象" 按钮
   - ✅ 检查: 物体被删除
   - ✅ 检查: 可以撤销删除

2. **删除关节**
   - 选中一个关节
   - 按 Delete 键删除
   - ✅ 检查: 关节被删除
   - ✅ 检查: 关联的物体保持不变

## 常见问题检查

### 如果看不到形状
- 检查是否在画布中心底部区域创建（Y 轴向上）
- 检查形状是否太小（最小 0.5m）

### 如果选择不工作
- 确保在 "选择" 模式下
- 尝试点击形状的中心区域
- 检查是否有其他形状遮挡

### 如果坐标显示异常
- 刷新页面重新测试
- 检查浏览器控制台是否有错误

## 性能测试（可选）

1. **创建多个物体**
   - 创建 20+ 个形状
   - ✅ 检查: 渲染流畅
   - ✅ 检查: 选择和移动响应快

2. **创建多个关节**
   - 创建 10+ 个关节
   - ✅ 检查: 关节渲染正确
   - ✅ 检查: 锚点拖动流畅

## ✅ 测试完成标准

- [ ] 所有形状工具工作正常
- [ ] 选择和移动流畅
- [ ] 关节创建和编辑正常
- [ ] 锚点拖动跟随物体移动
- [ ] 属性编辑立即生效
- [ ] 撤销/重做可靠
- [ ] 文件保存/加载正确
- [ ] Box2D 导出格式正确
- [ ] 坐标显示为米单位
- [ ] 网格和标签正确
- [ ] 删除功能正常

## 报告问题

如果发现问题，请记录：
1. 问题描述
2. 重现步骤
3. 预期结果 vs 实际结果
4. 浏览器控制台错误信息（如有）

---

**预计总测试时间**: 10-15 分钟
**完成测试后**: 应用就可以正式使用了！🎉
